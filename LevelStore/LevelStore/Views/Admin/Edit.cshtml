@model Product
@{
    ViewData["Title"] = "Edit";
    Layout = "_Layout";
    //ViewBag.ImageList = new List<string>();
}

@section scripts{
    <script src="/lib/jquery/dist/jquery.js"></script>
    <script type="text/javascript">
        var ololo = 0;
        $(document).ready(function() {
            $("#upload").click(function(e) {
                e.preventDefault();

                var fileUpload = $("#files").get(0);
                var files = fileUpload.files;
                var data = new FormData();
                for (var i = 0; i < files.length ; i++) {
                    data.append(files[i].name, files[i]);
                }

                $.ajax({
                    url: "/Admin/UploadFilesAjax/",
                    type: "POST",
                    contentType: false,
                    processData: false,
                    data: data,
                    success: function (message) {
                        for (var i = 1; i < files.length + 1 ; i++) {
                            $("#fileList").append("<input name=\"Images[" + i + "].Name \" Value=\"" + files[i].name + "\"/>");
                        }
                        alert(message);
                    },
                    error: function () {
                        alert("There was error uploading files!");
                    }

                });
                e.preventDefault();
            });
        });
    </script>
}

    <h2>Edit</h2>
    
    <form asp-action="Edit" method="post">
        <input type="hidden" asp-for="ProductID" />
        <div class="form-group">
            <label>Название:</label>
            <div><span asp-validation-for="Name" class="text-danger"></span></div>
            <input asp-for="Name" class="form-control" />
        </div>
        <div class="form-group">
            <label>Описание:</label>
            <div><span asp-validation-for="Description" class="text-danger"></span></div>
            <textarea asp-for="Description" class="form-control"></textarea>
        </div>
        <div class="form-group">
            <label>Категория:</label>
            <div><span asp-validation-for="Category" class="text-danger"></span></div>
            @{
            CategoryList categoryList = TempData["CategoriesList"] as CategoryList;
            <select asp-for="Category">
                <option disabled>Выберите категорию</option>
                @for (int i = 0; i < categoryList.categories.Count; i++)
            {
                if (i == 0)
                {
                    <option selected value="@categoryList.categories[i]">@categoryList.categories[i]</option>
            }
            else
            {
                <option value="@categoryList.categories[i]">@categoryList.categories[i]</option>
        }
    }
            </select>
            @*<input asp-for="Category" class="form-control" />*@
            }
        </div>
        <div class="form-group">
            <label>Цена:</label>
            <div><span asp-validation-for="Price" class="text-danger"></span></div>
            <input asp-for="Price" class="form-control" />
        </div>
        <div class="form-group">
            <label>Размер:</label>
            <div><span asp-validation-for="Size" class="text-danger"></span></div>
            <input asp-for="Size" class="form-control" />
        </div>
        <div>
            <label>Новый товар:</label>
            <div><span asp-validation-for="NewProduct" class="text-danger"></span></div>
            <input asp-for="NewProduct" class="form-control" />
        </div>
        <div class="text-center">
            <button class="btn btn-primary" type="submit">Save</button>
            <a asp-controller="Product" asp-action="List" class="btn btn-default">Cancel</a>
        </div>
    </form>